# 为什么会选择Vite

##  本文主题
- 前端工程化所解决的问题
- Vite的出发点
- 如何学好Vite


## 前端工程化所解决的问题

### 模块化需求
前端业内包含诸多类似于 ESM CommonJS，AMD，CMD的标准，所以前端工程要兼容不同模块的规范已适应不同的执行环境。
### 语法转译
类似于TS/JSX/LESS等诸多高级语法需要通过工具翻译成在浏览器可以执行的形式
### 生产环境的产物质量
和开发环境不同，我们不仅需要考虑代码的安全性和兼容性问题，我们还需要关注代码的性能和用户的实际体验。
### 开发体验
项目的冷启动和热更新，直接关系到我们的开发效率，这也是我们关心的。


## Vite的出发点
出发点就是传统的前端工具类似于Webpack，Rollup都太慢了，无论是冷启动或者是HMR热更新，在项目规模不断增大的同时，打包构建速度也越来越慢了，Vite借助浏览器原生支持的ES module和编译型语言开发的工具，实现冷启动和HMR在速度上质的飞跃。
**那么它是如何做到的**

 - 传统构建工具在项目启动时需要将整个项目处理并串联，然后才能在浏览器中运行，而Vite不事先打包整个项目，而是使用ES module提供源码，只在浏览器请求源码时进行转换并按需提供源码,而对源码编译的时候使用了Esbuild，带来了前所未有的编译速度。
 - 对于HMR而言，当文件修改时，Vite只需要让修改的文件与其热更新的边界的链接失活(大部分的时候只有模块本身)，这使得HMR速度一直很快，而不受应用规模大小的影响。另外，Vite利用HTTP请求头去加快页面加载，源码借助`304 not modified`进行协商缓存，而依赖借助`Cache
-Control: max-age= 31536000, immutable`进行强缓存。

## 如何学习Vite

### 学习Vite 可能会存在的问题
如果仅仅只是浅尝辄止，亦或者就仅仅使用vite的模板进行应用开发，那很可能遇到问题时会不知所措。
例如以下:
- 第三方库里面含有CommonJS代码报错怎么办
- 代码质量和代码规范如何去约束
- 构建后产物如何进行质量分析和优化
- 如何兼容不支持原生ESM的浏览器

如果遇到非常规化的需求，需要基于Esbuild和Rollup进行功能定制化。例如以下:
- 写一个Esbuild插件来处理依赖问题
- 对于Rollup打包产物进行自定义拆包，解决实际场景中的循环依赖问题
- 使用 Esbuild 的代码转译和压缩功能会出现哪些兼容性问题？如何解决？

Vite作为构建工具，也包含了Babel和core-js等诸多工具链的集成和应用。

### Vite课程设计
- 基础使用

从 0 开始实现 Vite 项目初始化，接入各种现代化的 CSS 方案，集成 Eslint、Styelint、Commonlint 等一系列 Lint 工具链，处理各种形式的静态资源，掌握 Vite 预编译的各种使用技巧，最终让你能独立搭建一个相对完整的脚手架工程
- 双引擎

学习 Vite 的双引擎架构， Esbuild 和 Rollup 相关的内容，包括它们的基本使用和插件开发，掌握最小必要知识，为后续的高级应用作铺垫
- 高级应用

学习 Vite 的各种高级用法和构建性能优化手段，学会如何编写一个完整的 Vite 插件，熟练进行生产环境拆包，使用 Vite 搭建复杂的 SSR 工程，实现基于模块联邦的跨应用模块共享架构。不管是项目性能优化技巧，还是对前端底层标准和规范的理解，你都会从这一模块得到不少提升。
- Vite 的核心源码

理解诸如JIT、Proxy Module、Module Graph、HMR Boundary和Plugin Container 等源码中重要概念的作用及底层实现，一步步教你学会阅读 Vite 的源码，将如下架构图中的关键环节各个击破，学透 Vite 实现原理。